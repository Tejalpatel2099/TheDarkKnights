@page
@model RamenRatings.WebSite.Pages.Product.CreateModel
@{
    ViewData["Title"] = "Create New Ramen";
}

<h2>Create New Ramen Product</h2>

<form method="post" enctype="multipart/form-data">
    <!-- Select from list of existing brands, with option to enter a new Brand -->
    <div class="form-group">
        <label for="Brand">Brand</label>
        <select class="form-control" id="Brand" name="Brand" required>
            <option value="">Select an Existing Brand</option>
            @foreach (var brand in Model.ExistingBrands.Distinct()) 
            {
                <option value="@brand">@brand</option>
            }
            <option value="Other">Other</option>
        </select>
        <small class="form-text text-muted">You can select an existing brand or type a new one.</small>
        <!-- If Other is selected, enter a new brand -->
        <div class="form-group" id="newBrandGroup" style="display:none;">
            <label for="NewBrand">Other Brand</label>
            <input type="text" class="form-control" id="NewBrand" name="NewBrand" placeholder="Enter a new brand" />
        </div>
    </div>

    <!-- Input Variety -->
    <div class="form-group">
        <label for="Variety">Variety</label>
        <input type="text" class="form-control" id="Variety" name="Variety" placeholder="Enter variety" required />
    </div>

    <!-- Select from list of existing styles, with option to enter new style -->
    <div class="form-group">
        <label for="Style">Style</label>
        <select class="form-control" id="Style" name="Style" required>
            <option value="">Select an Existing Style</option>
            @foreach (var style in Model.ExistingStyles.Distinct())  
            {
                <option value="@style">@style</option>
            }
            <option value="Other">Other</option>
        </select>
        <small class="form-text text-muted">You can select an existing style or type a new one.</small>
        <!-- If Other is selected, enter a new style -->
        <div class="form-group" id="newStyleGroup" style="display:none;">
            <label for="NewStyle">Other Style</label>
            <input type="text" class="form-control" id="NewStyle" name="NewStyle" placeholder="Enter a new style" />
        </div>
    </div>

    <!-- Input Country -->
    <div class="form-group">
        <label for="Country">Country</label>
        <input type="text" class="form-control" id="Country" name="Country" placeholder="Enter country" required>
    </div>

    <!-- Upload an image -->
    <div class="form-group">
        <label for="Image">Upload Image</label>
        <input type="file" class="form-control" id="Image" name="Image" accept="image/*" required>
    </div>

    <!-- Input a rating -->
    <div class="form-group">
        <label for="Rating">Rating</label>
        <input type="number" class="form-control" id="Rating" name="Rating" min="1" max="5" placeholder="Enter rating (1-5)" required>
    </div>

    <!-- Save/submit the new product -->
    <button type="submit" class="btn btn-primary">Create Ramen</button>

</form>


<!-- Script for showing or hiding the input fields for new brand or new style -->
@section Scripts {
    <script>
        document.getElementById('Brand').addEventListener('change', function () {
            var newBrandGroup = document.getElementById('newBrandGroup');
            if(this.value === "Other"){
                newBrandGroup.style.display = "block";
            }
            if(this.value !== "Other"){
                newBrandGroup.style.display = "none";
            }
        });

        document.getElementById('Style').addEventListener('change', function () {
            var newStyleGroup = document.getElementById('newStyleGroup');
            if(this.value === "Other"){
                newStyleGroup.style.display = "block";
            }
            if(this.value !== "Other"){
                newStyleGroup.style.display = "none";
            }
        });
    </script>
}
