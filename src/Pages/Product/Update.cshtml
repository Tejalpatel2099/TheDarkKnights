@page "{number}"
@model RamenRatings.WebSite.Pages.Product.UpdateModel
@{
    <!-- Page heading -->
    <h2>Update Existing Ramen Product</h2>

    <!-- Form to handle Update functionality -->
    <form method="post" enctype="multipart/form-data">
        <p> Current Ramen Image </p>
        <img src="@Model.Product.img?ts=@DateTime.Now.Ticks" alt="@Model.Product.Variety" class="img-fluid rounded" height="250" width="250" />

        <!-- Select from list of existing brands, with option to enter a new Brand -->
        <div class="form-group">
            <label for="Brand">Brand</label>
            <select class="form-control" id="Brand" name="Brand" required>
                <option value="">Select an Existing Brand</option>
                @foreach (var brand in Model.ExistingBrands.Distinct())
                {
                    <option value="@brand" selected="@(brand == @Model.Product.Brand)" )>@brand</option>
                }
                <option value="Other">Other</option>
            </select>

            <!-- If Other is selected, enter a new brand -->
            <div class="form-group" id="newBrandGroup" style="display:none;">
                <label for="NewBrand">Other Brand</label>
                <input type="text" class="form-control" id="NewBrand" name="NewBrand" placeholder="Enter a new brand" />
            </div>
        </div>

        <!-- Input Variety -->
        <div class="form-group">
            <label for="Variety">Variety</label>
            <input type="text" class="form-control" id="Variety" name="Variety" placeholder="Enter variety" value="@Model.Product.Variety" required />
        </div>

        <!-- Select from list of existing styles, with option to enter new style -->
        <div class="form-group">
            <label for="Style">Style</label>
            <select class="form-control" id="Style" name="Style" required>
                <option value="">Select an Existing Style</option>
                @foreach (var style in Model.ExistingStyles.Distinct())
                {
                    <option value="@style" selected="@(style == @Model.Product.Style)">@style</option>
                }
                <option value="Other">Other</option>
            </select>

            <!-- If Other is selected, enter a new style -->
            <div class="form-group" id="newStyleGroup" style="display:none;">
                <label for="NewStyle">Other Style</label>
                <input type="text" class="form-control" id="NewStyle" name="NewStyle" placeholder="Enter a new style" />
            </div>
        </div>

        <!-- Input Country -->
        <div class="form-group">
            <label for="Country">Country</label>
            <input type="text" class="form-control" id="Country" name="Country" placeholder="Enter country" value="@Model.Product.Country" required>
        </div>

        <!-- Upload an image -->
        <div class="form-group">
            <label for="Image">Upload Image </label>
            <input type="file" class="form-control" id="Image" name="Image" accept="image/*">
        </div>

        <!-- Save/submit the new product -->
        <button type="submit" class="btn btn-primary">Update Ramen</button>
    </form>


    <!-- Script for showing or hiding the input fields for new brand or new style -->
    @section Scripts {
        <script>
			// Show  the input fields for new brand or new style based on selection
            document.getElementById('Brand').addEventListener('change', function () {
                var newBrandGroup = document.getElementById('newBrandGroup');
                if(this.value === "Other"){
                    newBrandGroup.style.display = "block";
                }
                if(this.value !== "Other"){
                    newBrandGroup.style.display = "none";
                }
            });
            document.getElementById('Style').addEventListener('change', function () {
                var newStyleGroup = document.getElementById('newStyleGroup');
                if(this.value === "Other"){
                    newStyleGroup.style.display = "block";
                }
                if(this.value !== "Other"){
                    newStyleGroup.style.display = "none";
                }
            });
        </script>
    }
	<!-- End of script section -->

}
